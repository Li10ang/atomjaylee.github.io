<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>'螺旋仪HTML5' · JayLee | Blog</title><meta name="description" content="'螺旋仪HTML5' - Lee"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/logo.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://atomjaylee.github.io/atom.xml" title="JayLee | Blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/atomjaylee" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">'螺旋仪HTML5'</h1><div class="post-info">Sep 20, 2016</div><div class="post-content"><blockquote>
<p>之前的淘宝造物节的AR效果让人为之惊叹，最近看见大漠前辈在微信公众号上推送了两篇关于陀螺仪相关的文章，所以写一下读后感</p>
</blockquote>
<p>陀螺仪的使用是调用了HTML5的orientation,用来检测只能设备的运动方向，在移动端开发中能给用户带来良好的体验(控制游戏，手势识别，地图)； <strong>兼容性</strong>：移动设备现在无非是IOS和安卓系统，wp系统其实不是太常见，IOS系统&gt;=7.1;Android&gt;=4.0;兼容性还是相当不错的。</p>
<a id="more"></a>
<p><strong>坐标系</strong>：即笛卡尔坐标系，包括有，x(aplha),y(beta),z(gamma)三个坐标系， <img src="http://o9z96lbmh.bkt.clouddn.com/DeviceOrientation-4.png" alt="">; aplha:数值0到360度；beta:-180到180度；gamma：-90到90度；</p>
<p><strong>使用方法</strong>：使用方法和onclick时间相同，需要先测试一下设备是否已经支持orientation</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.DeviceOrientationEvent) &#123;</div><div class="line">  <span class="comment">//  支持DeviceOrientation API写在这里</span></div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"对不起，您的浏览器还不支持Device Orientation!!!"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>实例</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Alpha &amp; Beta &amp; Gamma<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width,minimum-scale=1,maximum-scale=1"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">media</span>=<span class="string">"screen"</span>&gt;</span><span class="css"></span></div><div class="line">    <span class="selector-tag">html</span>,</div><div class="line">    <span class="selector-tag">body</span> &#123;</div><div class="line">        <span class="attribute">margin</span>: <span class="number">0</span>;</div><div class="line">        <span class="attribute">padding</span>: <span class="number">0</span>;</div><div class="line">        <span class="attribute">width</span>: <span class="number">100vw</span>;</div><div class="line">        <span class="attribute">height</span>: <span class="number">100vh</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="selector-id">#myCanvas</span> &#123;</div><div class="line">        <span class="attribute">margin</span>: <span class="number">20px</span> auto;</div><div class="line">        <span class="attribute">position</span>: absolute;</div><div class="line">        <span class="attribute">top</span>: <span class="number">50%</span>;</div><div class="line">        <span class="attribute">left</span>: <span class="number">50%</span>;</div><div class="line">        <span class="attribute">-webkit-transform</span>: <span class="built_in">translate3d</span>(-50%, -50%, 0);</div><div class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(-50%, -50%, 0);</div><div class="line">    &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"myCanvas"</span> <span class="attr">width</span>=<span class="string">"360"</span> <span class="attr">height</span>=<span class="string">"450"</span> <span class="attr">style</span>=<span class="string">"border:1px solid #d3d3d3;"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">deviceOrientationListener</span>(<span class="params">event</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> c = <span class="built_in">document</span>.getElementById(<span class="string">"myCanvas"</span>);</div><div class="line">        <span class="keyword">var</span> ctx = c.getContext(<span class="string">"2d"</span>);</div><div class="line">        ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, c.width, c.height);</div><div class="line">        ctx.fillStyle = <span class="string">"#FF7777"</span>;</div><div class="line">        ctx.font = <span class="string">"14px Verdana"</span>;</div><div class="line">        ctx.fillText(<span class="string">"Alpha:"</span> + <span class="built_in">Math</span>.round(event.alpha), <span class="number">10</span>, <span class="number">20</span>);</div><div class="line">        ctx.beginPath();</div><div class="line">        ctx.moveTo(<span class="number">180</span>, <span class="number">75</span>);</div><div class="line">        ctx.lineTo(<span class="number">210</span>, <span class="number">75</span>);</div><div class="line">        ctx.arc(<span class="number">180</span>, <span class="number">75</span>, <span class="number">60</span>, <span class="number">0</span>, event.alpha * <span class="built_in">Math</span>.PI / <span class="number">180</span>);</div><div class="line">        ctx.fill();</div><div class="line"></div><div class="line">        ctx.fillStyle = <span class="string">"#FF6600"</span>;</div><div class="line">        ctx.fillText(<span class="string">"Beta:"</span> + <span class="built_in">Math</span>.round(event.beta), <span class="number">10</span>, <span class="number">140</span>);</div><div class="line">        ctx.beginPath();</div><div class="line">        ctx.fillRect(<span class="number">180</span>, <span class="number">150</span>, event.beta, <span class="number">90</span>);</div><div class="line"></div><div class="line">        ctx.fillStyle = <span class="string">"#FF0000"</span>;</div><div class="line">        ctx.fillText(<span class="string">"Gamma:"</span> + <span class="built_in">Math</span>.round(event.gamma), <span class="number">10</span>, <span class="number">270</span>);</div><div class="line">        ctx.beginPath();</div><div class="line">        ctx.fillRect(<span class="number">90</span>, <span class="number">340</span>, <span class="number">180</span>, event.gamma);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.DeviceOrientationEvent) &#123;</div><div class="line">        <span class="built_in">window</span>.addEventListener(<span class="string">"deviceorientation"</span>, deviceOrientationListener);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        alert(<span class="string">"Sorry, your browser doesn't support Device Orientation"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>也可以扫描下面的二维码在手机上实时查看<br><img src="http://o9z96lbmh.bkt.clouddn.com/DeviceOrientation-10.png" alt="png"></p>
<p>这里特别推荐一下淘宝造物节作者的github<a href="https://github.com/shrekshrek?tab=overview&amp;from=2016-08-01&amp;to=2016-08-31&amp;utf8=✓" target="_blank" rel="external">地址</a>;</p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/09/26/github部署网站/" class="prev">上一篇</a><a href="/2016/09/19/工作流备份/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2016 <a href="http://atomjaylee.github.io">Lee</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>